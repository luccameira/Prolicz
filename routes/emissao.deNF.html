<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Pedidos - Emissão NF</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" href="/css/emissao-nf.css">
    
    <style>
        /* Estes estilos básicos são para garantir que as páginas sejam exibidas corretamente */
        /* Pode ser que você já tenha esses estilos em um arquivo CSS global */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f7f6; /* Uma cor de fundo suave */
        }
        .filtros {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        .filtros label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        .filtros input, .filtros select {
            padding: 8px 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
        }
        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        .input-wrapper i {
            position: absolute;
            left: 10px;
            color: #aaa;
        }
        .input-wrapper input {
            padding-left: 35px; /* Espaço para o ícone */
        }
        .card {
            background-color: white;
            border-left: 5px solid #ffc107; /* Borda amarela para "Aguardando NF" */
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer; /* Indica que o card é clicável */
            transition: all 0.3s ease;
            position: relative; /* Para posicionar o badge */
        }
        .card:hover {
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        .card-header-nf {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .card-header-nf h3 {
            margin: 0;
            color: #333;
            font-size: 1.2rem;
        }
        .card-header-nf p {
            margin: 5px 0 0 0;
            color: #666;
            font-size: 0.9rem;
        }
        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.85rem;
        }
        .status-badge.destaque { /* Para "Aguardando NF" */
            background-color: #ffc107; /* Amarelo */
            color: #343a40; /* Preto para contraste */
        }
        .material-block {
            background-color: #f8f8f8;
            border: 1px solid #eee;
            border-radius: 5px;
            padding: 10px;
            margin-top: 15px;
            margin-bottom: 15px;
        }
        .material-block h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #555;
            font-size: 1rem;
        }
        .material-block p {
            margin: 5px 0;
            font-size: 0.95rem;
            color: #444;
        }
    </style>
</head>
<body>

    <div id="page-emissao-nf">
        <h1>Emissão de Nota Fiscal</h1>
        <div class="filtros">
            <div>
                <label for="filtroClienteNF">Buscar por cliente</label>
                <div class="input-wrapper">
                    <i class="fa fa-search"></i>
                    <input type="text" id="filtroClienteNF" placeholder="Buscar cliente...">
                </div>
            </div>
            <div>
                <label for="ordenarNF">Ordenar por</label>
                <select id="ordenarNF">
                    <option value="data_desc">Data mais recente</option>
                    <option value="data_asc">Data mais antiga</option>
                    <option value="az">Nome (A-Z)</option>
                    <option value="za">Nome (Z-A)</option>
                </select>
            </div>
        </div>
        <div id="lista-pedidos-nf">
            Carregando pedidos...
        </div>
    </div>

    <script>
        // Esta função decide qual parte da página deve ser mostrada
        // com base no "hash" da URL (ex: http://localhost:3000/#page-emissao-nf)
        function showPageByHash() {
            // Primeiro, oculta todas as divs que começam com 'page-'
            document.querySelectorAll('body > div[id^="page-"]').forEach(page => {
                page.style.display = 'none';
            });

            // Pega o hash da URL (ex: "#page-emissao-nf"). Se não houver hash, define um padrão.
            const hash = window.location.hash || '#page-emissao-nf'; 
            // Remove o '#' para obter o ID da div (ex: "page-emissao-nf")
            const targetPageId = hash.substring(1); 
            // Encontra a div correspondente pelo ID
            const targetPage = document.getElementById(targetPageId); 

            if (targetPage) {
                // Se a div for encontrada, a exibe
                targetPage.style.display = 'block';

                // Se a página for a de emissão de NF E a função 'carregarPedidosNF' existir,
                // então a chamamos para carregar os dados.
                if (targetPageId === 'page-emissao-nf' && typeof carregarPedidosNF === 'function') {
                    carregarPedidosNF(); 
                }
                // Se você tiver outras "páginas" controladas por hash,
                // você adicionaria 'else if' aqui para chamar suas respectivas funções de carregamento.
                // Exemplo:
                // else if (targetPageId === 'page-outra-tela' && typeof carregarOutraTela === 'function') {
                //     carregarOutraTela();
                // }
            } else {
                // Se o hash não corresponder a nenhuma página, você pode exibir uma mensagem de erro
                // ou redirecionar para uma página padrão (ex: '#page-emissao-nf')
                console.warn(`Página com hash ${hash} não encontrada. Exibindo página padrão.`);
                window.location.hash = '#page-emissao-nf'; // Redireciona para a página padrão
            }
        }

        // Adiciona um "ouvinte" para quando o hash da URL muda (ex: usuário clica em um link com #)
        window.addEventListener('hashchange', showPageByHash);
        // Adiciona um "ouvinte" para quando todo o conteúdo da página HTML é carregado
        document.addEventListener('DOMContentLoaded', showPageByHash);
    </script>
    
    <script src="/js/emissao-nf.js" defer></script>

</body>
</html>
